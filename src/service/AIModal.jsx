import { GoogleGenerativeAI } from "@google/generative-ai";

  
  const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-pro",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
  
  export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget, Give me a Hotels options list with\nHotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place\nDetails, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with\nbest time to visit in JSON format."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"tripDetails\": {\n    \"location\": \"Las Vegas, Nevada\",\n    \"duration\": \"3 Days\",\n    \"travelers\": \"Couple\",\n    \"budget\": \"Cheap\",\n    \"bestTimeToVisit\": \"Spring (March-May) and Fall (September-November)\" \n  },\n  \"hotels\": [\n    {\n      \"hotelName\": \"Excalibur Hotel & Casino\",\n      \"hotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$$ (Varies by season, check online)\", \n      \"hotelImageUrl\": \"https://www.excalibur.com/content/dam/excalibur/property/hero/Excalibur-Hero-Desktop.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.0993,\n        \"longitude\": -115.1715\n      },\n      \"rating\": 3.5,\n      \"description\": \"A castle-themed hotel with affordable rooms, various dining options, and a casino.\"\n    },\n    {\n      \"hotelName\": \"Circus Circus Las Vegas\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$$ (Varies by season, check online)\",\n      \"hotelImageUrl\": \"https://www.circuscircus.com/content/dam/circus/property/hero/Circus-Hero-Desktop.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1177,\n        \"longitude\": -115.1701\n      },\n      \"rating\": 3.0,\n      \"description\": \"Family-friendly hotel with a circus theme, affordable rooms, and an Adventuredome theme park.\"\n    },\n    {\n      \"hotelName\": \"LINQ Hotel + Experience\",\n      \"hotelAddress\": \"3535 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$$ (Varies by season, check online)\",\n      \"hotelImageUrl\": \"https://www.caesars.com/content/dam/linq/Property/Images/Hero/LINQ-Hero-Desktop.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1122,\n        \"longitude\": -115.1718\n      },\n      \"rating\": 4.0,\n      \"description\": \"Modern hotel with trendy rooms, the LINQ Promenade with shops and restaurants, and the High Roller observation wheel.\"\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"plan\": [\n        {\n          \"placeName\": \"Welcome to Las Vegas Sign\",\n          \"placeDetails\": \"Iconic welcome sign, perfect for photos.\",\n          \"placeImageUrl\": \"https://www.lasvegashowto.com/wp-content/uploads/2019/04/Welcome-to-Fabulous-Las-Vegas-Sign-640x400.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0803,\n            \"longitude\": -115.1735\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.5,\n          \"timeTravel\": \"30 minutes\"\n        },\n        {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"Pedestrian mall with a light show and live entertainment.\",\n          \"placeImageUrl\": \"https://www.vegasexperience.com/wp-content/uploads/2020/12/Fremont-Street-Experience-Viva-Vision-light-show-3.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1693,\n            \"longitude\": -115.1408\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.0,\n          \"timeTravel\": \"2 hours\"\n        }\n      ]\n    },\n    \"day2\": {\n      \"plan\": [\n        {\n          \"placeName\": \"Bellagio Conservatory & Botanical Garden\",\n          \"placeDetails\": \"Stunning displays of flowers and art.\",\n          \"placeImageUrl\": \"https://www.bellagio.com/content/dam/bellagio/Property/Conservatory-Botanical-Garden/Images/Bellagio-Conservatory-Botanical-Garden-Winter23-Image-1920x1080.jpg/jcr:content/renditions/cq5dam.web.1280.1280.jpeg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1135,\n            \"longitude\": -115.1762\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.5,\n          \"timeTravel\": \"1.5 hours\"\n        },\n        {\n          \"placeName\": \"The High Roller Observation Wheel\",\n          \"placeDetails\": \"Giant Ferris wheel with panoramic views of the city.\",\n          \"placeImageUrl\": \"https://www.caesars.com/content/dam/linq/Things-to-Do/High-Roller/High-Roller-Observation-Wheel-Night-1920x1080.jpg/jcr:content/renditions/cq5dam.web.1280.1280.jpeg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1117,\n            \"longitude\": -115.1728\n          },\n          \"ticketPricing\": \"$$ (Check online)\",\n          \"rating\": 4.0,\n          \"timeTravel\": \"1 hour\" \n        }\n      ]\n    },\n    \"day3\": {\n      \"plan\": [\n        {\n          \"placeName\": \"Seven Magic Mountains\",\n          \"placeDetails\": \"Colorful art installation south of the city.\",\n          \"placeImageUrl\": \"https://www.sevenmagicmountains.com/wp-content/uploads/2018/01/Seven-Magic-Mountains-Sunrise-3.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 35.9992,\n            \"longitude\": -115.0166\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.0,\n          \"timeTravel\": \"2 hours (including travel time from Las Vegas Strip)\"\n        },\n        {\n          \"placeName\": \"In-N-Out Burger (various locations)\",\n          \"placeDetails\": \"A West Coast classic for a cheap and tasty burger.\",\n          \"placeImageUrl\": \"https://s3-media0.fl.yelpcdn.com/bphoto/c2O4y3RFG009m5yrlLmBjw/o.jpg\",\n          \"geoCoordinates\": { \n            \"latitude\": \"Multiple locations, search online\",\n            \"longitude\": \"Multiple locations, search online\"\n          },\n\n          \"ticketPricing\": \"$\",\n          \"rating\": 4.5,\n          \"timeTravel\": \"1 hour\"\n        }\n      ]\n    }\n  }\n}\n```\n\n\nImprovements in this JSON:\n\n* **Hotel details are more comprehensive:** Includes address, realistic pricing note, image URL, geo-coordinates, rating, and a description.\n* **Itinerary is more structured:**  Each day has a list of activities.\n* **Place details are enhanced:** Includes place details, image URL, geo-coordinates (with a note about multiple locations for In-N-Out), a realistic ticket price, rating, and estimated time spent at each location.\n* **Best time to visit:** Added general guidance on the best time to visit Las Vegas.\n* **Travel time is included:** Provides an estimated time to spend at each location *and* accounts for travel between locations.\n* **Realistic Budget Considered:**  Suggests free or affordable activities and hotels with lower price ranges, aligning with the \"cheap budget\" requirement.\n* **More Complete URLs:**  Uses full, working example URLs where possible (though it's important to verify and update as needed).\n* **Geolocation Data:**  Provides more consistent and usable latitude/longitude data.\n\n\nRemember to double-check hotel prices and attraction details online before your trip, as these can change.  This revised JSON provides a much better starting point for planning a budget-friendly Las Vegas getaway."},
          ],
        },
      ],
    });
  
 
